(function(window,undefined){var CJS=window.CJS||{};CJS.start=function(){CJS.init();CJS.findScripts();CJS.downloadScripts();if(CJS.defer){if("undefined"!=typeof(document.readyState)&&"complete"===document.readyState){CJS.processScripts()}else{CJS.addHandler(window,"load",CJS.processScripts)}}else{CJS.dprint("Immediate processing is not currently supported.");CJS.processScripts()}};CJS.findScripts=function(){var aScripts=document.getElementsByTagName("script");var len=aScripts.length;for(var i=0;i<len;i++){var script=aScripts[i];if("text/cjs"===CJS.getAttribute(script,"type")&&"undefined"===typeof(script.cjsfound)){CJS.aScripts[CJS.aScripts.length]=script;script.cjsfound=true}}};CJS.downloadScripts=function(){var len=CJS.aScripts.length;for(var i=0;i<len;i++){var script=CJS.aScripts[i];var src=CJS.getAttribute(script,"data-cjssrc")||CJS.getAttribute(script,"cjssrc");if(src){CJS.downloadScript(src)}}};CJS.downloadScript=function(url){CJS.dprint("downloading "+url);if(CJS.bIE||CJS.bOpera){CJS.downloadScriptImage(url)}else{CJS.downloadScriptObject(url)}};CJS.downloadScriptImage=function(url){var img=new Image();img.onload=function(){CJS.onloadCallback(url,img)};img.onerror=function(){CJS.onloadCallback(url,img)};img.src=url};CJS.downloadScriptObject=function(url){if("undefined"===typeof(document.body)||!document.body){setTimeout("CJS.downloadScriptObject('"+url+"')",50);return}var obj=document.createElement("object");obj.data=url;obj.width=0;obj.height=0;obj.onload=function(){CJS.onloadCallback(url,obj)};obj.onerror=function(){CJS.onloadCallback(url,obj)};document.body.appendChild(obj)};CJS.onloadCallback=function(url,elem){if(elem.parentNode){elem.parentNode.removeChild(elem)}CJS.hLoaded[url]=true};CJS.execCallback=function(url){CJS.dprint("execCallback: "+url);if(0===CJS.aExecs.length){CJS.dprint("ERROR: We finished executing a script but the exec queue is empty: "+url);return}if(url==CJS.aExecs[0][0]){CJS.aExecs.splice(0,1)}else{CJS.dprint("ERROR: We finished executing a script that wasn't on the queue: "+url)}if(CJS.aExecs.length){CJS.execScript(CJS.aExecs[0][0],CJS.aExecs[0][1])}};CJS.processScripts=function(){CJS.processNextScript()};CJS.processNextScript=function(){if(CJS.aScripts.length){var script=CJS.aScripts[0];CJS.curScript=script;var src=CJS.getAttribute(script,"data-cjssrc")||CJS.getAttribute(script,"cjssrc");var cjsexec=CJS.getAttribute(script,"data-cjsexec")||CJS.getAttribute(script,"cjsexec");if(src){if("false"===cjsexec){CJS.aScripts.splice(0,1);setTimeout(CJS.processNextScript,0)}else{if(CJS.hLoaded[src]){CJS.processExternalScript(script,CJS.processNextScript);CJS.aScripts.splice(0,1)}else{CJS.dprint("processNextScript: waiting for script "+src);if("undefined"===typeof(script.startwait)){script.startwait=Number(new Date())}var delta=Number(new Date())-script.startwait;if(delta<CJS.maxWait){setTimeout(CJS.processNextScript,CJS.waitival)}else{alert("There was an error loading script: "+src)}}}}else{CJS.processInlineScript(script);CJS.aScripts.splice(0,1);setTimeout(CJS.processNextScript,0)}return}CJS.findScripts();if(CJS.aScripts.length){CJS.downloadScripts();setTimeout(CJS.processNextScript,0);return}document.write=CJS.docwriteOrig;CJS.dprint("DONE processing scripts")};CJS.processInlineScript=function(script){CJS.curScript=script;var code=script.text;CJS.dprint("processInlineScript: processing script code: "+code.substring(0,64));CJS.eval(code)};CJS.processExternalScript=function(script,callback){var src=CJS.getAttribute(script,"data-cjssrc")||CJS.getAttribute(script,"cjssrc");CJS.dprint("processExternalScript: processing script "+src);CJS.execScript(src,callback)};CJS.execScript=function(src,onload){CJS.dprint("execScript: "+src);if(0===CJS.aExecs.length){CJS.aExecs[CJS.aExecs.length]=[src,onload]}else{if(src!=CJS.aExecs[0][0]){CJS.dprint("execScript: queueing for later: "+src);CJS.aExecs[CJS.aExecs.length]=[src,onload];return}}var fonload=(function(ponload){switch(typeof(ponload)){case"string":ponload=new Function(ponload);break;case"function":break;default:ponload=new Function()}return ponload})(onload);var func=function(){if(this.readyState&&this.readyState!="complete"&&this.readyState!="loaded"){return}CJS.execCallback(src);this.onload=this.onreadystatechange=null;fonload()};var se=document.createElement("script");se.onload=se.onreadystatechange=func;se.src=src;var s1=document.getElementsByTagName("script")[0];s1.parentNode.insertBefore(se,s1)};CJS.eval=function(code){if(window.execScript){window.execScript(code)}else{var fn=function(){window.eval.call(window,code)};fn()}};CJS.init=function(){CJS.bInited=true;CJS.defer=("undefined"===typeof(CJS.defer)?true:CJS.defer);CJS.aScripts=[];CJS.hLoaded={};CJS.aExecs=[];CJS.bIE=(-1!=navigator.userAgent.indexOf("MSIE"));CJS.bChrome=(-1!=navigator.userAgent.indexOf("Chrome/"));CJS.bOpera=(-1!=navigator.userAgent.indexOf("Opera"));CJS.curScript=null;CJS.maxWait=5000;CJS.waitival=200;CJS.docwriteOrig=document.write;document.write=CJS.docwrite};CJS.getAttribute=function(elem,name){var attrs=elem.attributes;var len=attrs.length;for(var i=0;i<len;i++){var attr=attrs[i];if(name===attr.nodeName){return attr.nodeValue}}return undefined};CJS.addHandler=function(elem,sType,fn,capture){capture=(capture)?true:false;if(elem.addEventListener){elem.addEventListener(sType,fn,capture)}else{if(elem.attachEvent){elem.attachEvent("on"+sType,fn)}else{if(elem["on"+sType]){}else{elem["on"+sType]=fn}}}};if("undefined"!=typeof(console)&&"undefined"!=typeof(console.log)&&CJS.verbose){CJS.dprint=function(msg){console.log("CJS "+Number(new Date())+": "+msg)}}else{CJS.dprint=function(msg){}}CJS.docwrite=function(text){if(CJS.curScript){if(!CJS.curScript.docwriteTarget){CJS.curScript.docwriteTarget=document.createElement("span");CJS.curScript.parentNode.insertBefore(CJS.curScript.docwriteTarget,CJS.curScript)}var i1=text.indexOf("<script");if(-1===i1){CJS.dprint("docwrite: "+text.substring(0,64));CJS.curScript.docwriteTarget.innerHTML+=text}else{var i2=text.indexOf("<\/script>",i1)+9;if(-1!=i2){var textBefore=text.substring(0,i1);var textScript=text.substring(i1,i2);var textAfter=text.substring(i2+1);if(textBefore){CJS.dprint("docwrite: "+textBefore.substring(0,64));CJS.curScript.docwriteTarget.innerHTML+=textBefore+textAfter}CJS.docwriteScript(textScript)}}}else{CJS.dprint("ERROR: There's a problem with the async override of document.write.")}};CJS.docwriteScript=function(textScript){var aMatches=textScript.match(/src='([^']*)/i)||textScript.match(/src="([^"]*)/i)||textScript.match(/src=([^ >]*)/i);if(aMatches){var url=aMatches[1];CJS.dprint("docwriteScript url = "+url);var se=document.createElement("script");se.src=url;document.body.appendChild(se)}else{}};CJS.start()})(window);